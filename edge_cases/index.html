
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../use_cases/">
      
      
        <link rel="next" href="../future_enhancements/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Edge Cases & Error Handling - RetailPulse Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#edge-cases-and-error-handling" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="RetailPulse Docs" class="md-header__button md-logo" aria-label="RetailPulse Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RetailPulse Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Edge Cases & Error Handling
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="RetailPulse Docs" class="md-nav__button md-logo" aria-label="RetailPulse Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    RetailPulse Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../functional_docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Functional Docs
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Technical Docs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Technical Docs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../technical/tech_stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tech Stack
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../technical/data_flow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Flow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../technical/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../technical/schema_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schema Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../technical/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../technical/api_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../technical/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../use_cases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Use Cases
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Edge Cases & Error Handling
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Edge Cases & Error Handling
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-login-and-access-problems" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Login and Access Problems
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-bill-creation-problems" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Bill Creation Problems
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-inventory-management-problems" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Inventory Management Problems
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-user-management-problems" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. User Management Problems
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-multi-store-and-advanced-inventory-edge-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Multi-Store and Advanced Inventory Edge Cases
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../future_enhancements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Future Enhancements
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../development_workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development Workflow & Testing
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../test_files.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test Files
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-login-and-access-problems" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Login and Access Problems
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-bill-creation-problems" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Bill Creation Problems
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-inventory-management-problems" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Inventory Management Problems
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-user-management-problems" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. User Management Problems
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-multi-store-and-advanced-inventory-edge-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Multi-Store and Advanced Inventory Edge Cases
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="edge-cases-and-error-handling">Edge Cases and Error Handling</h1>
<h2 id="overview">Overview</h2>
<p>This document explains how RetailPulse handles common problems and unexpected situations.</p>
<hr />
<h2 id="1-login-and-access-problems">1. Login and Access Problems</h2>
<ul>
<li>
<p><strong>Problem</strong>: User tries to log in with no username or password.</p>
</li>
<li>
<p><strong>Solution</strong>: The system shows a "Username and password are required" message.</p>
</li>
<li>
<p><strong>Problem</strong>: User enters the wrong username or password.</p>
</li>
<li>
<p><strong>Solution</strong>: The system shows an "Invalid username or password" message.</p>
</li>
<li>
<p><strong>Problem</strong>: A deactivated user tries to log in.</p>
</li>
<li>
<p><strong>Solution</strong>: The system shows a "Your account has been deactivated" message.</p>
</li>
<li>
<p><strong>Problem</strong>: A <code>Store Manager</code> tries to access a <code>Company Admin</code>-only page.</p>
</li>
<li><strong>Solution</strong>: The system shows an "Insufficient permissions" message and denies access.</li>
</ul>
<hr />
<h2 id="2-bill-creation-problems">2. Bill Creation Problems</h2>
<ul>
<li>
<p><strong>Problem</strong>: User tries to create a bill with no products.</p>
</li>
<li>
<p><strong>Solution</strong>: The system requires at least one product to be in the bill.</p>
</li>
<li>
<p><strong>Problem</strong>: A product is not found in the store's inventory or is inactive.</p>
</li>
<li>
<p><strong>Solution</strong>: The system shows a "Product not found or inactive" message.</p>
</li>
<li>
<p><strong>Problem</strong>: The quantity requested is more than the available stock in the selected batch.</p>
</li>
<li>
<p><strong>Solution</strong>: The system shows an error message like "Only 5 units available in this batch".</p>
</li>
<li>
<p><strong>Problem</strong>: The quantity is zero or a negative number.</p>
</li>
<li>
<p><strong>Solution</strong>: The system requires the quantity to be greater than zero.</p>
</li>
<li>
<p><strong>Problem</strong>: The database connection is lost while creating a bill.</p>
</li>
<li><strong>Solution</strong>: The entire transaction is cancelled (rolled back) to prevent partial data. The user is asked to try again.</li>
</ul>
<hr />
<h2 id="3-inventory-management-problems">3. Inventory Management Problems</h2>
<ul>
<li>
<p><strong>Problem</strong>: <code>Company Admin</code> tries to create a product with a name that already exists.</p>
</li>
<li>
<p><strong>Solution</strong>: The system shows a "Product with this name already exists" message.</p>
</li>
<li>
<p><strong>Problem</strong>: <code>Stockist</code> tries to adjust stock to a negative quantity.</p>
</li>
<li><strong>Solution</strong>: The system shows a "Stock quantity cannot be negative" message. The database has a <code>CHECK</code> constraint to enforce this.</li>
</ul>
<hr />
<h2 id="4-user-management-problems">4. User Management Problems</h2>
<ul>
<li>
<p><strong>Problem</strong>: <code>Company Admin</code> tries to create a user with a username that already exists.</p>
</li>
<li>
<p><strong>Solution</strong>: The system shows a "Username already exists" message.</p>
</li>
<li>
<p><strong>Problem</strong>: <code>Company Admin</code> tries to deactivate their own account.</p>
</li>
<li><strong>Solution</strong>: The system prevents this to ensure there's always at least one active super admin.</li>
</ul>
<hr />
<h2 id="5-multi-store-and-advanced-inventory-edge-cases">5. Multi-Store and Advanced Inventory Edge Cases</h2>
<ul>
<li>
<p><strong>Problem</strong>: A <code>Sales</code> user tries to sell a product from a batch that has expired.</p>
</li>
<li>
<p><strong>Solution</strong>: The system should not show expired batches in the search results on the billing page. If an API call is made directly, the backend should reject the request with a "Cannot sell from expired batch" error.</p>
</li>
<li>
<p><strong>Problem</strong>: Two <code>Sales</code> users try to sell the last item of a batch at the same time (a race condition).</p>
</li>
<li>
<p><strong>Solution</strong>: The system uses database-level transaction isolation. The first transaction to commit will succeed. The second transaction will fail when it attempts to update the quantity, as the stock will already be zero. It will receive an error like "Insufficient stock".</p>
</li>
<li>
<p><strong>Problem</strong>: A branch store loses internet connection to the central server.</p>
</li>
<li>
<p><strong>Solution</strong>: In the current design, the system requires a live connection to the central database. If the connection is lost, the store's terminal will not be able to create new bills or look up inventory. (A future enhancement could be a limited "offline mode" that syncs data once the connection is restored).</p>
</li>
<li>
<p><strong>Problem</strong>: A <code>Company Admin</code> reassigns a <code>Store Manager</code> from Store A to Store B.</p>
</li>
<li><strong>Solution</strong>: The user's <code>store_id</code> is updated in the <code>users</code> table. The change should take effect on their next login. When they log in again, their session data will be for Store B, and they will no longer have access to Store A's data or settings.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.expand"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>